package com.starsec.dao;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import org.springframework.stereotype.Repository;

import com.starsec.model.DataTablePage;
import com.starsec.po.LeakComment;
import com.starsec.vo.LeakCommentVo;

/** 漏洞评论表(LEAK_COMMENT) **/
@Repository
public class LeakCommentDao extends BaseDao<LeakComment, Serializable> {
	

	/**
	 * 根据漏洞id查询漏洞评论
	 * @param page
	 * @param leakId
	 * @return
	 */
	public DataTablePage findPageByLeakId(DataTablePage page, Integer leakId) {
		StringBuffer hql = new StringBuffer(" from " +LeakComment.class.getCanonicalName() + " where 1=1");
		List<Object> paramList = new ArrayList<Object>();
		
		hql.append(" and leak.id = ? ");
		paramList.add(leakId);
		
		hql.append(" order by commentTime desc ");

		return super.findPageByFetchedHql(LeakCommentVo.class, hql.toString(), null, page.getPageNo(), page.getLimit(), paramList.toArray());

	}

}