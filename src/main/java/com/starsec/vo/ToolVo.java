package com.starsec.vo;

import java.math.BigInteger;
import java.util.ArrayList;
import java.util.List;
import java.util.Set;

import com.starsec.constants.Constants;
import com.starsec.constants.ToolStatus;
import com.starsec.model.Vo;
import com.starsec.po.LeakType;
import com.starsec.po.Tool;
import com.starsec.util.DateUtil;
import com.starsec.util.SessionUtil;

/**
 * 工具列表
 * 
 * @author cheng cheng
 *
 */
public class ToolVo implements Vo<Tool> {

	/** 工具ID */
	private Integer toolId;

	/** 工具名称 */
	private String toolName;

	/** 发布时间 */
	private String createTime;

	private Integer toolTypeId;
	private String toolTypeName;

	private List<LeakType> leakTypes;

	private String toolAuthor;
	private String toolOutline;
	private String usageMethod;
	private String cveId;
	private String cnnvdId;
	private String cnvdId;
	private String status;

	/** 评论总数 */
	private Integer sumComment;

	/** 附件ID **/
	private Integer attachmentId;

	private String fileName;

	private String attachmentDownLoadPath;

	/** 提交人用户ID */
	private Integer submitUserId;

	/** 提交人用户名 */
	private String submitUserAccount;

	/** 工具评论数量 */
	private Integer countToolComments;

	private Long sumReleasedTool;
	private Long sumUnreleasedTool;
	private BigInteger countTool;
	private BigInteger countUser;
	private Integer userGroupId;
	private String userGroupName;

	private String nickName;
	private Integer departmentId;
	private String departmentName;

	@Override
	public void from(Tool po) {
		setCountToolComments(po.getToolComments().size());// 工具评论数量
		setToolId(po.getId());
		setToolName(po.getToolName());
		setCreateTime(DateUtil.formatDateTime(po.getCreateTime()));
		setToolTypeId(po.getToolType().getId());
		setToolTypeName(po.getToolType().getToolName());

		Set<LeakType> leakTypes = po.getLeakTypes();
		if (leakTypes != null) {
			setLeakTypes(new ArrayList<LeakType>(leakTypes));
		}
		setToolAuthor(po.getToolAuthor());
		setToolOutline(po.getToolOutline());
		setUsageMethod(po.getUsageMethod());
		setCveId(po.getCveId());
		setCnnvdId(po.getCnnvdId());
		setCnvdId(po.getCnvdId());
		setStatus(ToolStatus.valueOf(po.getStatus()).toString());

		setSumComment(po.getToolComments().size());

		if (po.getSysAttachment() != null) {
			setAttachmentId(po.getSysAttachment().getId());
			String ctx = (String) SessionUtil.getRequest().getAttribute(Constants.CTX);
			setAttachmentDownLoadPath(ctx + Constants.DOWNLOAD_FILE_URL + getAttachmentId().toString());
			setFileName(po.getSysAttachment().getFileName());
		}

		setSubmitUserId(po.getSubmitUser().getId());
		setSubmitUserAccount(po.getSubmitUser().getUserAccount());
	}

	
	public BigInteger getCountUser() {
		return countUser;
	}

	public void setCountUser(BigInteger countUser) {
		this.countUser = countUser;
	}

	public String getNickName() {
		return nickName;
	}

	public void setNickName(String nickName) {
		this.nickName = nickName;
	}

	public Integer getDepartmentId() {
		return departmentId;
	}

	public void setDepartmentId(Integer departmentId) {
		this.departmentId = departmentId;
	}

	public String getDepartmentName() {
		return departmentName;
	}

	public void setDepartmentName(String departmentName) {
		this.departmentName = departmentName;
	}

	public Integer getUserGroupId() {
		return userGroupId;
	}

	public void setUserGroupId(Integer userGroupId) {
		this.userGroupId = userGroupId;
	}

	public String getUserGroupName() {
		return userGroupName;
	}

	public void setUserGroupName(String userGroupName) {
		this.userGroupName = userGroupName;
	}

	public BigInteger getCountTool() {
		return countTool;
	}

	public void setCountTool(BigInteger countTool) {
		this.countTool = countTool;
	}

	public Long getSumReleasedTool() {
		return sumReleasedTool;
	}

	public void setSumReleasedTool(Long sumReleasedTool) {
		this.sumReleasedTool = sumReleasedTool;
	}

	public Long getSumUnreleasedTool() {
		return sumUnreleasedTool;
	}

	public void setSumUnreleasedTool(Long sumUnreleasedTool) {
		this.sumUnreleasedTool = sumUnreleasedTool;
	}
	public Integer getAttachmentId() {
		return attachmentId;
	}

	public void setAttachmentId(Integer attachmentId) {
		this.attachmentId = attachmentId;
	}

	public Integer getToolId() {
		return toolId;
	}

	public void setToolId(Integer toolId) {
		this.toolId = toolId;
	}

	public String getToolName() {
		return toolName;
	}

	public void setToolName(String toolName) {
		this.toolName = toolName;
	}

	public String getCreateTime() {
		return createTime;
	}

	public void setCreateTime(String createTime) {
		this.createTime = createTime;
	}

	public Integer getSumComment() {
		return sumComment;
	}

	public void setSumComment(Integer sumComment) {
		this.sumComment = sumComment;
	}

	public Integer getSubmitUserId() {
		return submitUserId;
	}

	public void setSubmitUserId(Integer submitUserId) {
		this.submitUserId = submitUserId;
	}

	public String getSubmitUserAccount() {
		return submitUserAccount;
	}

	public void setSubmitUserAccount(String submitUserAccount) {
		this.submitUserAccount = submitUserAccount;
	}

	public Integer getToolTypeId() {
		return toolTypeId;
	}

	public void setToolTypeId(Integer toolTypeId) {
		this.toolTypeId = toolTypeId;
	}

	public String getToolTypeName() {
		return toolTypeName;
	}

	public void setToolTypeName(String toolTypeName) {
		this.toolTypeName = toolTypeName;
	}

	public List<LeakType> getLeakTypes() {
		return leakTypes;
	}

	public void setLeakTypes(List<LeakType> leakTypes) {
		this.leakTypes = leakTypes;
	}

	public String getToolAuthor() {
		return toolAuthor;
	}

	public void setToolAuthor(String toolAuthor) {
		this.toolAuthor = toolAuthor;
	}

	public String getToolOutline() {
		return toolOutline;
	}

	public void setToolOutline(String toolOutline) {
		this.toolOutline = toolOutline;
	}

	public String getUsageMethod() {
		return usageMethod;
	}

	public void setUsageMethod(String usageMethod) {
		this.usageMethod = usageMethod;
	}

	public String getCveId() {
		return cveId;
	}

	public void setCveId(String cveId) {
		this.cveId = cveId;
	}

	public String getCnnvdId() {
		return cnnvdId;
	}

	public void setCnnvdId(String cnnvdId) {
		this.cnnvdId = cnnvdId;
	}

	public String getCnvdId() {
		return cnvdId;
	}

	public void setCnvdId(String cnvdId) {
		this.cnvdId = cnvdId;
	}

	public String getStatus() {
		return status;
	}

	public void setStatus(String status) {
		this.status = status;
	}

	public String getAttachmentDownLoadPath() {
		return attachmentDownLoadPath;
	}

	public void setAttachmentDownLoadPath(String attachmentDownLoadPath) {
		this.attachmentDownLoadPath = attachmentDownLoadPath;
	}

	public String getFileName() {
		return fileName;
	}

	public void setFileName(String fileName) {
		this.fileName = fileName;
	}

	public Integer getCountToolComments() {
		return countToolComments;
	}

	public void setCountToolComments(Integer countToolComments) {
		this.countToolComments = countToolComments;
	}

}