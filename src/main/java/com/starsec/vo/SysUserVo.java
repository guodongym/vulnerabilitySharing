package com.starsec.vo;

import java.util.HashSet;
import java.util.Map;
import java.util.Set;

import com.starsec.model.Vo;
import com.starsec.po.SysRole;
import com.starsec.po.SysUser;

public class SysUserVo implements Vo<SysUser>  {

	private int id;
	private String userName;
	private String userAccount;
	private String nickname;
	private int filePath;
	private Map<String, Boolean> roles;
	private int news;

	private boolean error;
	private String message;
	
	//用户角色
	private String rolesString;

	//用户角色set
	private Set<SysRole> sysRoleSet;

	//用户组Name
	private String sysUserGroupName;
	
	//用户组id
	private Integer sysUserGroupId;
	
	/** 用户所属部门ID  */
	private Integer sysDepartmentId;
	
	/** 用户所属部门Name  */
	private String sysDepartmentName;
	
	/** 是否禁用  */
	private boolean isDisable;
	
	/** 任务积分  */
	private Integer taskScore;

	

	@Override
	public void from(SysUser po) {
		setTaskScore(po.getTaskScore());
		setId(po.getId());
		setUserName(po.getUserName());
		setUserAccount(po.getUserAccount());
		setRolesString(getRolesString(po));//用户角色
		setSysUserGroupName(po.getSysUserGroup().getUserGroupName());//用户组Name
		setSysUserGroupId(po.getSysUserGroup().getId());//用户组id
		setSysDepartmentId(getSysDepartmentId(po));//用户所属部门ID
		setSysDepartmentName(getSysDepartmentName(po));// 用户所属部门Name
		setDisable(po.isDisable());
		setSysRoleSet(getSysRoleSet(po));//获得用户角色set
	}
	
	/**
	 * 获得用户角色set
	 * @param po
	 * @return
	 */
	private Set<SysRole> getSysRoleSet(SysUser po) {
		Set<SysRole> sysRoleSetVo = new HashSet<SysRole>();
		if(null!=po.getSysRoles()){
			for (SysRole sysRolePo : po.getSysRoles()) {
				SysRole sysRoleVo = new SysRole();
				sysRoleVo.setId(sysRolePo.getId());
				sysRoleVo.setRoleName(sysRolePo.getRoleName());
				sysRoleSetVo.add(sysRoleVo);
			}
		}
		return sysRoleSetVo;
	}

	/**
	 *  用户所属部门Name
	 * @param po
	 * @return
	 */
	private String getSysDepartmentName(SysUser po) {
		if(null!=po.getSysDepartment()){
			return po.getSysDepartment().getDepartmentName();
		}
		return null;
	}
	/**
	 * 用户所属部门ID
	 * @param po
	 * @return
	 */
	private Integer getSysDepartmentId(SysUser po) {
		if(null!=po.getSysDepartment()){
			return po.getSysDepartment().getId();
		}
		return null;
	}
	

	/**
	 * 获取用户角色 
	 * @param po
	 * @return
	 */
	private String getRolesString(SysUser po) {
		StringBuffer rolesString= new StringBuffer();
		for (SysRole sysRole : po.getSysRoles()) {
			rolesString.append(sysRole.getRoleName()+"  ");
		}
		return rolesString.toString();
	}

	public static final SysUserVo error(String message) {
		SysUserVo sysUserVo = new SysUserVo();
		sysUserVo.setError(true);
		sysUserVo.setMessage(message);
		return sysUserVo;
	}

	
	public int getId() {
		return id;
	}
	public void setId(int id) {
		this.id = id;
	}
	public String getUserName() {
		return userName;
	}
	public void setUserName(String userName) {
		this.userName = userName;
	}
	public String getUserAccount() {
		return userAccount;
	}
	public void setUserAccount(String userAccount) {
		this.userAccount = userAccount;
	}
	public String getNickname() {
		return nickname;
	}
	public void setNickname(String nickname) {
		this.nickname = nickname;
	}

	public int getFilePath() {
		return filePath;
	}
	public void setFilePath(int filePath) {
		this.filePath = filePath;
	}
	public Map<String, Boolean> getRoles() {
		return roles;
	}
	public void setRoles(Map<String, Boolean> roles) {
		this.roles = roles;
	}
	public int getNews() {
		return news;
	}
	public void setNews(int news) {
		this.news = news;
	}

	public boolean isError() {
		return error;
	}

	public void setError(boolean error) {
		this.error = error;
	}

	public String getMessage() {
		return message;
	}

	public void setMessage(String message) {
		this.message = message;
	}

	public String getRolesString() {
		return rolesString;
	}

	public void setRolesString(String rolesString) {
		this.rolesString = rolesString;
	}

	public String getSysUserGroupName() {
		return sysUserGroupName;
	}

	public void setSysUserGroupName(String sysUserGroupName) {
		this.sysUserGroupName = sysUserGroupName;
	}

	public Integer getSysUserGroupId() {
		return sysUserGroupId;
	}

	public void setSysUserGroupId(Integer sysUserGroupId) {
		this.sysUserGroupId = sysUserGroupId;
	}

	public Integer getSysDepartmentId() {
		return sysDepartmentId;
	}

	public void setSysDepartmentId(Integer sysDepartmentId) {
		this.sysDepartmentId = sysDepartmentId;
	}

	public String getSysDepartmentName() {
		return sysDepartmentName;
	}

	public void setSysDepartmentName(String sysDepartmentName) {
		this.sysDepartmentName = sysDepartmentName;
	}

	public boolean isDisable() {
		return isDisable;
	}

	public void setDisable(boolean isDisable) {
		this.isDisable = isDisable;
	}
	public Set<SysRole> getSysRoleSet() {
		return sysRoleSet;
	}
	public void setSysRoleSet(Set<SysRole> sysRoleSet) {
		this.sysRoleSet = sysRoleSet;
	}

	public Integer getTaskScore() {
		return taskScore;
	}

	public void setTaskScore(Integer taskScore) {
		this.taskScore = taskScore;
	}
	

	



	




}
