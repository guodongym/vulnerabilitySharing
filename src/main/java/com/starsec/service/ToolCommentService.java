package com.starsec.service;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.starsec.dao.ToolCommentDao;
import com.starsec.dao.ToolDao;
import com.starsec.model.DataTablePage;
import com.starsec.model.Result;
import com.starsec.po.Tool;
import com.starsec.po.ToolComment;
import com.starsec.util.DateUtil;
import com.starsec.util.SessionUtil;

@Service
public class ToolCommentService {
	
	@Autowired
	private ToolCommentDao toolCommentDao;
	
	@Autowired
	private ToolDao toolDao;
	
	
	public DataTablePage findPageByToolId(DataTablePage page, Integer toolId) {
		page.resetPageNo();
		return toolCommentDao.findPageByToolId(page,toolId);
	}


	public Result save(String content, Integer toolId) {
		Tool tool = toolDao.get(toolId);
		ToolComment toolComment = new ToolComment();
		toolComment.setTool(tool);
		toolComment.setCommentUser(SessionUtil.loginUser());
		toolComment.setCommentTime(DateUtil.currentTime());
		toolComment.setContent(content);
		toolCommentDao.save(toolComment);
		return Result.SUCCESS;
	}
}