<#macro head title="">
<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0" />
<#if title??>
	<title>${title}</title>
</#if>

<link rel="stylesheet" type="text/css" href="${ctx}/static/css/bootstrap/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="${ctx}/static/css/myCss.css">
<link rel="stylesheet" type="text/css" href="${ctx}/static/css/bootstrap/bootstrap-table.min.css">
<link rel="stylesheet" type="text/css" href="${ctx}/static/css/sweetalert/sweetalert.css">

<script type="text/javascript" src="${ctx}/static/script/jquery/jquery-3.0.0.min.js"></script>
<script type="text/javascript" src="${ctx}/static/script/bootstrap/bootstrap.min.js"></script>
<script type="text/javascript" src="${ctx}/static/script/bootstrap/bootstrap-table.min.js"></script>
<script type="text/javascript" src="${ctx}/static/script/bootstrap/bootstrap-table-zh-CN.min.js"></script>
<script type="text/javascript" src="${ctx}/static/script/sweetalert/sweetalert.min.js"></script>

<script type="text/javascript">
   	var CTX = '${ctx}';
   	var newsNum = '${newsNum}';
   	
   	function logout(){
		swal({
			title:"注销",
			text: "您确定要注销么?",
			type: "info",
			showCancelButton: true,
			cancelButtonText:"取消",
			CancelButtonColor: "#cccccc",
			confirmButtonText: "确定",
			closeOnConfirm: true
		},function(){
			location.href=CTX + "/logout";
		});
	}

	function ajaxError(XMLHttpRequest, textStatus, errorThrown){
		swal({
			title:XMLHttpRequest.status,
			text: errorThrown,
			type: "error",
			showCancelButton: false,
			confirmButtonColor: "#DD6B55",
			confirmButtonText: "确定",
			closeOnConfirm: true
		});
	}
</script>

<#nested />
</head>
</#macro>

<#macro footer>
<footer class="text-center">
    ©<a href="#">国网山东省电力公司</a>
</footer>
</#macro>

<#macro nav active>
<header class="navbar navbar-default navbar-static" style="border-radius: 0px;border: none;">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="${ctx}/toHome">红蓝督协同工作平台</a>
        </div>
        <div class="collapse navbar-collapse bs-example-js-navbar-collapse">
            <ul class="nav navbar-nav multi-level" id="nav_nav">
				<li role="presentation" <#if active=='home'> class="active"</#if> ><a href="${ctx}/toHome">首页</a></li>
            	<#list menus as menu>
					<#if permissions?seq_contains(menu.url)>
						<li role="presentation" <#if active==menu.menuCode>class="dropdown active"<#else>class="dropdown"</#if> >
		                    <a class="dropdown-toggle" type="button" id="${menu.menuCode}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
		                       	 ${menu.name}
		                        <span class="caret"></span>
		                    </a>
		                    <ul class="dropdown-menu" aria-labelledby="${menu.menuCode}">
		                    	<#list menu.children as subMenu>
									<#if permissions?seq_contains(subMenu.url)>
										<#if subMenu.children??>
			                        		<li class="dropdown-submenu">
					                            <a tabindex="-1" href="javascript:;">${subMenu.name}</a>
					                            <ul class="dropdown-menu">
					                            	<#list subMenu.children as graMenu>
					                            		<#if permissions?seq_contains(graMenu.url)>
						                                	<li><a tabindex="-1" href="${ctx}${graMenu.url}">${graMenu.name}</a></li>
					                               		</#if>
					                                </#list>
					                            </ul>
					                        </li>
					                    <#else>
		                        			<li><a href="${ctx}${subMenu.url}">${subMenu.name}</a></li>
		                        		</#if>
									</#if>
								</#list>
		                    </ul>
		                </li>
					</#if>	
				</#list>
            </ul>
            <ul class="nav navbar-nav navbar-right" id="message_nav">
                <li class="dropdown">
                    <a class="dropdown-toggle" id="news" href="${ctx}/toUserNew" >
                        <button class="btn btn-danger btn-xs">消息<span class="badge" id="newsNum">${newsNum}</span></button>
                    </a>
                </li>
            </ul>
             <ul class="nav navbar-nav navbar-right" id="photo">
                <li class="dropdown" style="padding: 0px">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="${ctx}/toUserInfo?userID=${loginUser.id}" target="_blank" style="padding: 5px 0px">
                        <img class="clean" src="${ctx}/attachment/download/${(loginUser.sysAttachment.id)!'0'}" style="width: 40px;height:40px;border-radius: 25px">
                    	<span><#if loginUser.nickname?? && loginUser.nickname!="">${loginUser.nickname}<#else>${loginUser.userAccount}</#if></span>
                    	<span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="user">
                        <li><a href="${ctx}/toUserInfo?userID=${loginUser.id}">个人中心</a></li>
                        <li><a href="${ctx}/toUserSetting?userID=${loginUser.id}">信息修改</a></li>
                        <li><a href="javascript:logout()">注销</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</header>
</#macro>



<#macro tab id titles=[] class="">
<div class="tabbable tabbable-custom">
	<ul class="nav nav-tabs<#if class??> ${class}</#if>">
		<#list titles as title>
		<li<#if title_index=0> class="active"</#if>><a href="#${id}_${title_index}" data-toggle="tab">${title}</a></li>
		</#list>
	</ul>
	<div class="tab-content">
		<#nested />
	</div>
</div>
</#macro>

<#macro tabItem id="" active=false>
<div class="<#if active>active </#if>tab-pane" id="${id}">
	<#nested />
</div>
</#macro>
